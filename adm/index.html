<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Admin Not√≠cias</title>
<style>
body {
    font-family: Poppins, sans-serif;
    background: #f4f4f4;
    padding: 20px;
}

h2 {
    margin-bottom: 10px;
    color: #482ff7;
}

.card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

input, textarea, button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 15px;
}

button {
    background: #482ff7;
    color: white;
    border: none;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    opacity: 0.9;
}

.noticia-card {
    background: #e5e9f8;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    position: relative;
}

.excluir-btn {
    background: #00000055;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
}
</style>
</head>
<body>

<h2>üìå Publicar Not√≠cia</h2>

<div class="card">
    <label>T√≠tulo:</label>
    <input type="text" id="titulo" placeholder="Digite o t√≠tulo da not√≠cia">

    <label>Descri√ß√£o:</label>
    <textarea id="descricao" rows="4" placeholder="Digite a descri√ß√£o"></textarea>

    <label>URL da Not√≠cia:</label>
    <input type="text" id="url" placeholder="Link externo para a not√≠cia completa">

    <button id="publicar">Publicar Not√≠cia</button>
</div>

<h2>üìã Not√≠cias Publicadas</h2>
<div id="lista-noticias"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue, remove } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "AIzaSyAAkBk52aOoo9IZsbEIHRBwOyIZ66Mbhx0",
    authDomain: "mural-af763.firebaseapp.com",
    projectId: "mural-af763",
    storageBucket: "mural-af763.firebasestorage.app",
    messagingSenderId: "418040841130",
    appId: "1:418040841130:web:9d96121172ccede5dea1d3",
    measurementId: "G-W4QTRV47TM"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const noticiasRef = ref(db, "noticias");

// Publicar not√≠cia
document.getElementById("publicar").onclick = () => {
    const titulo = document.getElementById("titulo").value.trim();
    const descricao = document.getElementById("descricao").value.trim();
    const url = document.getElementById("url").value.trim();

    if(!titulo || !descricao) return alert("Preencha t√≠tulo e descri√ß√£o!");

    const novaNoticia = push(noticiasRef);
    set(novaNoticia, { titulo, descricao, url, data: Date.now() });

    document.getElementById("titulo").value = "";
    document.getElementById("descricao").value = "";
    document.getElementById("url").value = "";
};

// Listar not√≠cias
onValue(noticiasRef, snapshot => {
    const lista = document.getElementById("lista-noticias");
    lista.innerHTML = "";
    snapshot.forEach(child => {
        const id = child.key;
        const noticia = child.val();
        const div = document.createElement("div");
        div.className = "noticia-card";
        div.innerHTML = `
            <span class="excluir-btn" onclick="excluirNoticia('${id}')">Excluir</span>
            <h3>${noticia.titulo}</h3>
            <p>${noticia.descricao}</p>
            <a href="${noticia.url}" target="_blank">Ler a not√≠cia completa</a>
        `;
        lista.appendChild(div);
    });
});

window.excluirNoticia = id => remove(ref(db, "noticias/" + id));
</script>

</body>
  </html>
